#!/bin/bash -e

if [ "$1" != "" ]; then
  date_opt_value=$@
else
  date_opt_value=now
fi

date_opt="--date=$date_opt_value"

date_str_abbrev=$(date "$date_opt" +%y.%m.%d)
date_str_long=$(date "$date_opt" +%Y-%m-%d)
file_name=~/Documents/journal/$date_str_abbrev.md
week_calendar=$(remind -c+ ~/.reminders | sed 's/^/    /g')

if [[ ! -f $file_name ]]; then
  cat >> $file_name <<HERE
# $date_str_abbrev

$week_calendar

HERE
fi

echo $file_name
